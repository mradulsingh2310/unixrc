# ┌──────────────────────────────────────────────────────────────┐
# │                     MINIMAL GLASS TMUX                       │
# │            Modern • Clean • Web-Inspired Design              │
# │──────────────────────────────────────────────────────────────│
# │  Synced to: ~/unixrc/tmux/tmux.conf                          │
# │  After editing, run: cp ~/.tmux.conf ~/unixrc/tmux/tmux.conf │
# │  Then commit: cd ~/unixrc && git add -A && git commit -m "update tmux" && git push
# └──────────────────────────────────────────────────────────────┘

# ═══════════════════════════════════════════════════════════════
# CORE SETTINGS
# ═══════════════════════════════════════════════════════════════
set -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:RGB,screen-256color:RGB"
# Allow cursor style passthrough
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'
# Extended keys for Cmd keybindings (Ghostty -> Neovim)
set -g extended-keys off
set -s extended-keys off
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 50000
setw -g automatic-rename on
setw -g automatic-rename-format '#{b:pane_current_command}'
set -sg escape-time 0
set -g focus-events on

# ═══════════════════════════════════════════════════════════════
# STATUS BAR POSITION & TIMING
# ═══════════════════════════════════════════════════════════════
set -g status-position top
set -g status-interval 1

# ═══════════════════════════════════════════════════════════════
# COLOR PALETTE - Refined Dark Mode
# ═══════════════════════════════════════════════════════════════
# Base
BG="#0d1117"           # Deep space black (GitHub dark)
FG="#e6edf3"           # Soft white
SUBTLE="#30363d"       # Subtle borders
MUTED="#8b949e"        # Muted text

# Accents
CYAN="#58a6ff"         # Primary accent (links/active)
GREEN="#3fb950"        # Success/positive
PURPLE="#a371f7"       # Special/git
ORANGE="#d29922"       # Warning/time
PINK="#db61a2"         # Highlight

# Glass effect colors
GLASS="#161b22"        # Frosted panel
GLASS_BORDER="#21262d" # Panel edge

# ═══════════════════════════════════════════════════════════════
# STATUS BAR BASE
# ═══════════════════════════════════════════════════════════════
set -g status-style "bg=#0d1117,fg=#e6edf3"
set -g status-left-length 100
set -g status-right-length 150
set -g status-justify left

# ═══════════════════════════════════════════════════════════════
# LEFT: Session Badge
# ═══════════════════════════════════════════════════════════════
set -g status-left "\
#[fg=#161b22,bg=#0d1117]#[fg=#58a6ff,bg=#161b22,bold]  #S #[fg=#161b22,bg=#0d1117] "

# ═══════════════════════════════════════════════════════════════
# RIGHT: Path + Git + Clock
# ═══════════════════════════════════════════════════════════════
set -g status-right "\
#[fg=#8b949e]  #{=40:pane_current_path} \
#[fg=#30363d]│\
#[fg=#f34f29] #[fg=#a371f7]#(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD 2>/dev/null) \
#[fg=#30363d]│\
#[fg=#3fb950] 󰥔 %H:%M:%S \
#[fg=#30363d]│\
#[fg=#d29922] 󰃭 %d %b  "

# ═══════════════════════════════════════════════════════════════
# WINDOW TABS - Minimal with vim-style cursor
# ═══════════════════════════════════════════════════════════════
set -g window-status-separator "  "
set -g window-status-style "bg=#0d1117,fg=#6e7681"
set -g window-status-current-style "bg=#0d1117,fg=#e6edf3,bold"

# Inactive: Muted text
set -g window-status-format " #I #W "

# Active: Vim cursor block + bright text
set -g window-status-current-format "#[fg=#58a6ff]▎#[fg=#e6edf3]#I #W "

# ═══════════════════════════════════════════════════════════════
# PANE BORDERS - Minimal Lines (no active indicator)
# ═══════════════════════════════════════════════════════════════
set -g pane-border-style "fg=#21262d"
set -g pane-active-border-style "fg=#21262d"
set -g pane-border-lines single
set -g pane-border-indicators off

# ═══════════════════════════════════════════════════════════════
# MESSAGES & MENUS
# ═══════════════════════════════════════════════════════════════
set -g message-style "fg=#e6edf3,bg=#161b22"
set -g message-command-style "fg=#58a6ff,bg=#161b22"
set -g mode-style "fg=#0d1117,bg=#58a6ff"

# ═══════════════════════════════════════════════════════════════
# POPUP & MENU STYLING
# ═══════════════════════════════════════════════════════════════
set -g popup-border-style "fg=#30363d"
set -g popup-border-lines rounded

# ═══════════════════════════════════════════════════════════════
# KEY BINDINGS
# ═══════════════════════════════════════════════════════════════
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload with visual feedback
bind r source-file ~/.tmux.conf \; display-message "  Config reloaded"

# Intuitive splits (preserving path)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
unbind '"'
unbind %

# Vim navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes (Ctrl+Arrow - same as Neovim)
bind -n C-Up resize-pane -U 2
bind -n C-Down resize-pane -D 2
bind -n C-Left resize-pane -L 2
bind -n C-Right resize-pane -R 2

# Quick zoom
bind z resize-pane -Z

# Copy selection to clipboard and exit copy mode
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
bind E select-layout tiled

# Alt+number for window switching
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5

# ═══════════════════════════════════════════════════════════════
# PLUGINS
# ═══════════════════════════════════════════════════════════════
set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.tmux/plugins/'
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'

run '~/.tmux/plugins/tpm/tpm'
set -g allow-passthrough on
